<!DOCTYPE html>
<html lang="en">
  <body style="margin: 0px">
    <script type="module">
      import init from //, { start_game }
      "./game/ti_helper_map_render.js";

      const urlParams = new URLSearchParams(window.location.search);
      const gameId = urlParams.get("gameId");

      function handleErr(error) {
        if (
          !error.message.startsWith(
            "Using exceptions for control flow, don't mind me. This isn't actually an error!",
          )
        ) {
          throw error;
        }
      }

      if (gameId === null) {
        throw "Got null gameId";
      }

      await init()
        .then((v) => console.log("First then value", v))
        .catch(handleErr);

      // console.log("I got the game id ", gameId);
      // let resp = await start_game(gameId);
      // console.log("response from start_game: ", resp);
    </script>
  </body>
</html>
